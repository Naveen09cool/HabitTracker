
<section id="habbit-Tracker">
    <div id="create-task-container">
        <form action="/create-task" method="POST">
            <input type="text" name="taskName" placeholder="Enter Task..." required>
            <input type="submit" value="Add task">
        </form>
    </div>            
    <div id="task-list-container">
        <!-- <ul> -->
        
                <% for(tsk of task){ %>
                <li>
                <div id="task-name-container">

                        <ul>
                            <li>                         
                                <%= tsk.taskName %>
                                <% if(locals.task){ %>
                                    <a href="/delete-task/<%= tsk._id%>">Delete-Task</a>
                                <% } %> 
                            </li>
                        </ul>
                </div>
                <!-- <div id="main-container"> -->
                <!-- <div id="update-actions-container"> -->
                    <% if(locals.task){ %>
                <!-- </div> -->
                <div id="actions-list-container">
                    <!-- <ul id="task-actions-< task._id >"></ul> ahauhui-->
                    <table style="width:100% ;text-align:center">
                        <tr>
                            <th>Sun 0</th>
                            <th>Mon 1</th>
                            <th>Tue 2</th>
                            <th>wed 3</th>
                            <th>Thu 4</th>
                            <th>Fri 5</th>
                            <th>Sat 6</th>
                        </tr>
                        <tr>
                            <% for(let dy = 0; dy <= 6; dy++){ %>
                                <td> 
                                    <%if(new Date().getUTCDay().toString() == dy.toString()) {%>
                                        <form action="/action-status" method="POST">
                                            <li>
                                            <!-- <input type="radio" name="actionStatus" value="true">
                                            <label>Done</label> -->
                                            <!-- <input type="radio" name="actionStatus" value="false">
                                            <label>NotDone</label> -->
                                            <!-- <input type="submit" value="Submit"> -->
                                            <input type="hidden" name="task" value="<%= tsk._id %>">    
                                            <button type="submit" name="actionStatus" value="true">Done!</button>
                                            <button type="submit" name="actionStatus" value="false">NotDone</button>
                                            </li>                                       
                                        </form>
                                    <%}%>
                                                                                                       
                                <% for(let i = tsk.actions.length; i>= 0; i--){ %>                                    
                                    <% if(tsk.actions[i]){ %>
                                        
                                        <% if(dy.toString() == tsk.actions[i].dateRecord.getDay().toString()){ %>      
                                            [<%= tsk.actions[i].dateRecord.toString().slice(0,4) %>]
                                            <%=tsk.actions[i].actionStatus %>
                                        <%}else{%>                                            
                                                <%= %>                                            
                                        <%}%>   <!-- IfElse part for daymatching table closing here --> 

                                    <%}%>   <!-- If(Tsk.actions) closing here --> 
                                <%}%>   <!-- For Loop (Inner) closing here --> 
                                </td>
                            <%}%>   <!-- For Loop (Outer) closing here --> 
                        </tr> <!-- Row for table tat contains status closing here --> 
                    </table>            
                </div>
                <% } %>    <!-- Locals.Task closing here -->    
                <!-- </div> -->
            </li>
            <%} %>   <!-- For Loop closing here -->     
        <!-- </ul> -->
    </div>
</section>