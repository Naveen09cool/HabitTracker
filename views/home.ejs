
<section id="habit-Tracker">
    <div id="create-task-container">
        <h3>"Your habits defines you!!"</h3>
        <form action="/create-task" method="POST">
            <input id="habit-input" type="text" name="taskName" placeholder="Enter New habit..." required>
            <input id="habit-input-button" type="submit" value="Add task">
            <button id="habit-input-button" disabled="disabled">Total habits</button>
        </form>
    </div>            
    <div id="task-list-container">
        <!-- <ul> -->
        
            <% for(tsk of task){ %>
            <li>
            <!-- <div id="one-task-container"> -->
                <div id="task-name-container">

                        <ul>
                            <li>                         
                                <%= tsk.taskName %>
                            </li>
                            <li>
                                <% if(locals.task){ %>
                                    <!-- <a href="/delete-task/<%= tsk._id%>">Delete-Task</a> -->
                                    <form action="/delete-task/<%= tsk._id%>">
                                        <input type="submit" value="Delete-Task" />
                                    </form>
                                <% } %> 
                            </li>
                        </ul>
                </div>
                <!-- <div id="main-container"> -->
                <!-- <div id="update-actions-container"> -->
                    <% if(locals.task){ %>
                <!-- </div> -->
                <div id="actions-list-container">
                    <!-- <ul id="task-actions-< task._id >"></ul> ahauhui-->
                    <table style="width:100% ;text-align:center">
                        <tr>
                            <% %>
                            <%for(let i = 6; i>=0; i--){ %>
                                <th><%=new Date(Date.now() - 864e5 * i).toString().slice(0,10);%></th>
                            <%}%>
                            <!-- <th>Sun 0</th>
                            <th>Mon 1</th>
                            <th>Tue 2</th>
                            <th>wed 3</th>
                            <th>Thu 4</th>
                            <th>Fri 5</th>
                            <th>Sat 6</th> -->
                        </tr>
                        <tr>
                            <% for(let j = 1; j <= 7; j++){ %>
                                <%var dy = j%7;%>
                                <td> 
                                    <%if(new Date().getUTCDay().toString() == dy.toString()) {%>
                                        <form action="/action-status" method="POST">
                                            <li>
                                                <input type="hidden" name="task" value="<%= tsk._id %>">    
                                                <button type="submit" name="actionStatus" value="true">Done!</button>
                                                <button type="submit" name="actionStatus" value="false">NotDone</button>
                                            </li>                                       
                                        </form>
                                    <%}%>                                                                                                       
                                <% for(let i = tsk.actions.length; i>= 0; i--){ %>                                    
                                    <% if(tsk.actions[i]){ %>
                                        
                                        <% if(dy.toString() == tsk.actions[i].dateRecord.getDay().toString()){ %>      
                                            [<%= tsk.actions[i].dateRecord.toString().slice(0,4) %>]
                                            <%=tsk.actions[i].actionStatus %>
                                        <%}else{%>                                            
                                                <%= %>                                            
                                        <%}%>   <!-- IfElse part for daymatching table closing here --> 

                                    <%}%>   <!-- If(Tsk.actions) closing here --> 
                                <%}%>   <!-- For Loop (Inner) closing here --> 
                                </td>
                            <%}%>   <!-- For Loop (Outer) closing here --> 
                        </tr> <!-- Row for table tat contains status closing here --> 
                    </table>            
                </div>
                <% } %>    <!-- Locals.Task closing here -->    
                <!-- </div> -->
            <!-- </div>  one-task-container -->
            </li>
            <%} %>   <!-- For Loop closing here -->     
        <!-- </ul> -->
    </div>
</section>